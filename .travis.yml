dist: xenial
sudo: false
language: python
python:
  - "3.6"
  - "3.7"
# command to install dependencies
install:
  - python setup.py install
  - pip install pytest-cov rstcheck
script:
  - pytest --cov-report=xml --cov=gnpy
  - rstcheck --ignore-roles cite --ignore-directives automodule --recursive --ignore-messages '(Duplicate explicit target name.*)' .
  - ./examples/transmission_main_example.py
  - ./examples/path_requests_run.py
  - sphinx-build docs/ x-throwaway-location
  #- yanglint -t config --strict --merge -f xml -D yang/tip-*.yang yang/all.json
  # ^^ this is with CESNET's libyang. Alternatively, use CZ-NIC's yangson:
  #- python path/to/yangson/tools/python/mkylib.py yang/ > LIB.json
  #- yangson -p yang --validate yang/all.json LIB.json
after_success:
  - bash <(curl -s https://codecov.io/bash)
